BootStrap: docker
From: ubuntu:20.04

#build image
#sudo singularity build cellranger_v7.2.0.simg cellranger_v7.2.0.def
#using image
#sudo singularity shell -B local_folder:/WORKDIR/container_folder single_cell_CellRanger_TCR_BCR.simg


%environment
    export PATH=/opt/tools/bin:$PATH
    export RETICULATE_MINICONDA_ENABLED=FALSE
    LANG=en_US.UTF-8
    LC_ALL=en_US.UTF-8
    LC_TIME=en_US.UTF-8
    LC_MONETARY=en_US.UTF-8
    LC_PAPER=en_US.UTF-8
    LC_MEASUREMENT=en_US.UTF-8

%post
    echo "Ubuntu version ######################"
    cat /etc/lsb-release
    apt-get -y update && apt-get -y upgrade
    #apt-get install -y libcurl4-openssl-dev libssl-dev libxml2-dev libgsl-dev libgit2-dev
    #apt-get install -y dirmngr gnupg apt-transport-https ca-certificates software-properties-common
    #apt-get -y update && apt-get -y upgrade
    #apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9
    #add-apt-repository 'deb https://cloud.r-project.org/bin/linux/ubuntu focal-cran40/'
    #apt-get -y update && apt-get -y upgrade

    echo "CellRanger ######################"
    apt-get install -y wget
    mkdir /tools
    cd /tools
    echo "85e2573e80a6f8656a42ff09460463e6  cellranger-7.2.0.tar.gz" > mysum
    wget -O cellranger-7.2.0.tar.gz "https://cf.10xgenomics.com/releases/cell-exp/cellranger-7.2.0.tar.gz?Expires=1706234149&Key-Pair-Id=APKAI7S6A5RYOXBWRPDA&Signature=LbRVrK~~N5LCBOXUqYwgjux1bP~zdXkCxnmRdfau9dn8K1TZ~83VHOE4vsx9ET7bPF9R4IceDOmStKQtK08F5BuH0qFWEdm3p4mrMI4IWpV7NpIdLEBIH~KGrgyriNJm28qqSdY812N5VCGPSOwdlN6zQe8IZl9qOn0X3-yDqN0ZAd5~tKcwJSjtLOmwWhdCcCdfw0QMSotlkYy67k5n48Gkgp7UyoAe1zcbzFvfU2tub2kAEcurPAgUWMYKqguazKWBjgx-ST1k-~qVxLNSrJJYrT6te~lHFnC0--BTMmdMTx0b~Et5mk0ubVa2rkpdeC3LspjJXrJRrKuB2UiLcw__"
    md5sum --check mysum
    tar -xzvf cellranger-7.2.0.tar.gz
    rm cellranger-7.2.0.tar.gz mysum
    

%labels
    Author Marine AGLAVE
    
m_aglave/cellranger_v7.2.0:001
