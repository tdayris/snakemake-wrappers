BootStrap: docker
From: ubuntu:20.04

#build image
#sudo singularity build cellranger_arc_v2.0.2.simg cellranger_arc_v2.0.2.def
#using image
#sudo singularity shell -B local_folder:/WORKDIR/container_folder cellranger_arc_v2.0.2.simg


%environment
    export PATH=/opt/tools/bin:$PATH
    export RETICULATE_MINICONDA_ENABLED=FALSE
    LANG=en_US.UTF-8
    LC_ALL=en_US.UTF-8
    LC_TIME=en_US.UTF-8
    LC_MONETARY=en_US.UTF-8
    LC_PAPER=en_US.UTF-8
    LC_MEASUREMENT=en_US.UTF-8

%post
    echo "Ubuntu version ######################"
    cat /etc/lsb-release
    apt-get -y update && apt-get -y upgrade

    echo "CellRanger ######################"
    apt-get install -y wget
    mkdir /tools
    cd /tools
    echo "7303f8ceee7b60113c9a0087268830cd  cellranger-arc-2.0.2.tar.gz" > mysum
    wget -O cellranger-arc-2.0.2.tar.gz "https://cf.10xgenomics.com/releases/cell-arc/cellranger-arc-2.0.2.tar.gz?Expires=1706774482&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jZi4xMHhnZW5vbWljcy5jb20vcmVsZWFzZXMvY2VsbC1hcmMvY2VsbHJhbmdlci1hcmMtMi4wLjIudGFyLmd6IiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzA2Nzc0NDgyfX19XX0_&Signature=dWYhe8YkULHcXk-q4HJkIwUMkbPIQBuL0ELSywHtvxc4qg9KJzAnpSdFhDkJxGF0RGIRVMbao7vNBXfMTZxhGmJO6N1QwIqrmINkq2iKdWx~fV59TtClaAD1Y6LIVyq5Afeet~WtWxXRcdiO9p1u4ivRwjY-8JEXucE1Au5BYXJDOvjRZIM3B8NstbU2G~ZQdFjInvdiOX17aazkHanP8UmrkwPpjhbPOI5zYAnT9LcE8WQg~blGWsls3DbUpvIGsyZOXuSAlRCZhR9-8oW69nYishkrQwuGcUlfLw-wGjJup0V-Igsqc94I0n372O8yAKuXpcgAp-gWzTmZBEen4A__&Key-Pair-Id=APKAI7S6A5RYOXBWRPDA"
    md5sum --check mysum
    tar -xzvf cellranger-arc-2.0.2.tar.gz
    rm cellranger-arc-2.0.2.tar.gz mysum
    
%labels
    Author Marine AGLAVE
