BootStrap: docker
From: ubuntu:20.04

#build image
#sudo singularity build cellranger_atac_v2.1.0.simg cellranger_atac_v2.1.0.def
#using image
#sudo singularity shell -B local_folder:/WORKDIR/container_folder cellranger_atac_v2.1.0.simg


%environment
    export PATH=/opt/tools/bin:$PATH
    export RETICULATE_MINICONDA_ENABLED=FALSE
    LANG=en_US.UTF-8
    LC_ALL=en_US.UTF-8
    LC_TIME=en_US.UTF-8
    LC_MONETARY=en_US.UTF-8
    LC_PAPER=en_US.UTF-8
    LC_MEASUREMENT=en_US.UTF-8

%post
    echo "Ubuntu version ######################"
    cat /etc/lsb-release
    apt-get -y update && apt-get -y upgrade

    echo "CellRanger ######################"
    apt-get install -y wget
    mkdir /tools
    cd /tools
    echo "3f44ba66ae789c2ab03f9c380a6718ca  cellranger-atac-2.1.0.tar.gz" > mysum
    wget -O cellranger-atac-2.1.0.tar.gz "https://cf.10xgenomics.com/releases/cell-atac/cellranger-atac-2.1.0.tar.gz?Expires=1706774481&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jZi4xMHhnZW5vbWljcy5jb20vcmVsZWFzZXMvY2VsbC1hdGFjL2NlbGxyYW5nZXItYXRhYy0yLjEuMC50YXIuZ3oiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE3MDY3NzQ0ODF9fX1dfQ__&Signature=QAes5vx0QMQQtyVgSR8g7zf791AJE5o2ZhGowTK3-AkDSlXL8IQpnyr1TMxAtd~8N92QTndtF4lwDU~2fMKkXt78bdpOEmrEaZWb6R36XvV4S8kwg8vmln2HdN7~oGa1z0Kw86NjQxXr-vlsg4v63wZhuATZm1gndo25eFt66fwWA7Na4f0pXn7-Anjgy9ktc~k3PHqOqwvgQyxzMvviblF~UVaoXi-F9kt1kLZ6q94HnvM9q9gp9ODtxZmZ~XVoLpvIQffBzsGFZq7zcIo7GuN8v-Y3x5XSTNcZgFZdzw-xEyU8DAyjWhq69PndB7gUCb6EYR8gvmkAO2tdVryvhw__&Key-Pair-Id=APKAI7S6A5RYOXBWRPDA"
    md5sum --check mysum
    tar -xzvf cellranger-atac-2.1.0.tar.gz
    rm cellranger-atac-2.1.0.tar.gz mysum 

%labels
    Author Marine AGLAVE
    
