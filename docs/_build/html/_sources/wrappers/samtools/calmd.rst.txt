.. _`bio/samtools/calmd`:

SAMTOOLS CALMD
==============

Calculates MD and NM tags. For more information see `SAMtools documentation <http://www.htslib.org/doc/samtools-calmd.html>`_.


Example
-------

This wrapper can be used in the following way:

.. code-block:: python

    rule samtools_calmd:
        input:
            aln = "{sample}.bam", # Can be 'sam', 'bam', or 'cram'
            ref = "genome.fasta"
        output:
            "{sample}.calmd.bam"
        params:
            "-E" # optional params string
        threads: 2
        wrapper:
            "0.72.0-485-g7ec4df6d4/bio/samtools/calmd"

Note that input, output and log file paths can be chosen freely.
When running with

.. code-block:: bash

    snakemake --use-conda

the software dependencies will be automatically deployed into an isolated environment before execution.

Software dependencies
---------------------

* ``samtools==1.11``




Authors
-------

* Filipe G. Vieira


Code
----

.. code-block:: python

    __author__ = "Filipe G. Vieira"
    __copyright__ = "Copyright 2020, Filipe G. Vieira"
    __license__ = "MIT"


    from os import path
    from snakemake.shell import shell

    out_name, out_ext = path.splitext(snakemake.output[0])
    out_ext = out_ext[1:].upper()

    shell(
        "samtools calmd --threads {snakemake.threads} {snakemake.params} --output-fmt {out_ext} {snakemake.input.aln} {snakemake.input.ref} > {snakemake.output[0]}"
    )
